doctype html
html
  head
   
    meta(charset="utf-8")
    meta(content="IE=edge" http-equiv="X-UA-Compatible")
    meta(content="width=device-width, initial-scale=1.0" name="viewport")
    meta(content="" name="description")
    meta(content="" name="author")

    title RANIA CHATROOM

    link(href="../../public/stylesheets/dashboard.css" rel="stylesheet")
    link(href="../../public/stylesheets/button.css" rel="stylesheet")
    link(href="../../public/stylesheets/col.css" rel="stylesheet")
    link(href="../../public/stylesheets/root.css" rel="stylesheet")
    link(href="../../public/stylesheets/hr.css" rel="stylesheet")
    link(href="../../public/stylesheets/container.css" rel="stylesheet")
    link(href="../../public/stylesheets/ul.css" rel="stylesheet")
    link(href="../../public/stylesheets/dropdown.css" rel="stylesheet")
    link(href="../../public/stylesheets/nav.css" rel="stylesheet")
    link(href="../../public/stylesheets/mobile.css" rel="stylesheet")
    link(href="../../public/stylesheets/sb.css" rel="stylesheet")
    link(href="../../public/stylesheets/card.css" rel="stylesheet")
    link(href="../../public/stylesheets/accordion.css" rel="stylesheet")
    link(href="../../public/stylesheets/misc.css" rel="stylesheet")
    link(href="../../public/stylesheets/table.css" rel="stylesheet")
    link(href="../../public/stylesheets/link.css" rel="stylesheet")
    script(type='module' src="../../public/scripts/Dashboard/dashboard.js")
    script(src='https://d3js.org/d3.v7.min.js')

  body.sb-nav-fixed
    #layoutSidenav
      .mobile-menu
        input#hamburger(
          value="hamb" 
          name="hamb" 
          type="checkbox"
          )
        label(for="hamb") ☰
        ul.mobile
          li
            a.nav-link(href="index.html") Manage Devices
          li
            a.nav-link(href="/settings") Edit Resident Info
          li
            a.nav-link(href="index.html") Send data to...
      div(id="layoutSidenav_nav")
        nav#sidenavAccordion.sb-sidenav.accordion.sb-sidenav-dark
          .sb-sidenav-menu
            .nav
              a.nav-title RANIA Homepage
              a.nav-link(href="/dashboard") Dashboard
              a.nav-link(href="/questions") Ask a Question 
              a.nav-link(href="/calendar") Calendar
              a.nav-link(href="/messages") Messages
              a.nav-link(href="/reminders") Reminders
              a.nav-link(href="/usersettings") User Settings
              //- a.nav-link(href="/devices") Manage Devices
              //- a.nav-link(href="/settings") User Info
              //- a.nav-link(href="/agenda") Manage Your Agenda
          .sb-sidenav-footer
            .small Logged in as:
            | UserName
            button.db-button(type='button' onclick="window.location.href='/'") logout
      div(id="layoutSidenav_content")
        main
                
            // Display area for results
            div#chat-container(style='overflow-y; height: 725px; padding: 10px;')

            div#chatContainer(style='position: fixed; bottom: 0; left: 30; width: 90%; padding: 10px; background-color: #f0f0f0;')
                // Input form
                input(type='text', id='chat-input', placeholder='Type your message here', style='width: 82%; height: 65px; font-size: 20px;')
                button(id='submit-button', style='width: 10%; height: 65px; font-size: 20px;', onclick="sendMessage()") Send
            script(src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.0.0/js/bootstrap.bundle.min.js")
    script.
      const chatMessages = []; // Array to store chat messages
          
      // Function to display messages in the chat container
      function displayDemoMessages() {
        const chatContainer = document.getElementById('chat-container')
        // Predefined messages for the demo
        const demoMessages = [
                  { user: "User1", message: "Hello!" },
                  { user: "User2", message: "Hi there!" },
                  { user: "User1", message: "How are you?" },
                  { user: "User2", message: "I'm doing well, thanks. How about you?" },
                  { user: "User1", message: "I'm great, thanks for asking!" }
              ];

              // Display predefined messages
              demoMessages.forEach(({ user, message }) => {
                  const p = document.createElement('p');
                  p.textContent = `${user}: ${message}`;
                  chatContainer.appendChild(p);
              });
      }

      function displayReplyMessages(){
        const chatContainer = document.getElementById('chat-container');

          const replyMessages = [
              { user: "User1", message: "I should be!" },
              { user: "User2", message: "No, I have work :(" }
          ];

          // Display reply messages
          replyMessages.forEach(({ user, message }) => {
              const p = document.createElement('p');
              p.textContent = `${user}: ${message}`;
              chatContainer.appendChild(p);
          });
      }

      function displayMessages() {
        const chatContainer = document.getElementById('chat-container');
       // chatContainer.innerHTML = '';

        // Display chatMessages
        chatMessages.forEach(message => {
            const p = document.createElement('p');
            p.textContent = message;
            chatContainer.appendChild(p);
        });
        }

      // Function to handle sending a message
      function sendMessage() {
        const input = document.getElementById('chat-input');
        const message = input.value.trim();
        if (message) {
            chatMessages.push("UserName: " + message);
            input.value = '';
            displayMessages(); // Display messages after sending a new message

            // Display replyMessages after sending a message
            setTimeout(() => {
                displayReplyMessages();
            }, 2000); // Adjust the delay as needed (in milliseconds)
        }
      }

      // Initial display of messages
      displayDemoMessages();